<!DOCTYPE html>
<head>
  <title>Vega Lite Bar Chart</title>
  <meta charset="utf-8">

  <style media="screen">
    body {
      font-family: sans-serif;
    }
    h1 {
      text-align: center;
    }

    .vega-actions {
      display: none;
    }

    .tooltip-example {
      margin: 40px 0px;
    }
    .tooltip-example canvas {
      display: block;
      margin: auto;
    }
  </style>

  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="https://vega.github.io/vega/vega.min.js"></script>
  <script src="./vega-lite.min.js"></script>
  <script src="http://vega.github.io/vega-editor/vendor/vega-embed.js" charset="utf-8"></script>
  <script src="https://vega.github.io/vega-editor/vendor/d3.geo.projection.min.js"></script>
  <script src="https://vega.github.io/vega-editor/vendor/topojson.js"></script>
  <script src="http://vega.github.io/datalib/datalib.min.js"></script>
  <script src="src/vg-tooltip.js" charset="utf-8"></script>
  <link rel="stylesheet" type="text/css" href="src/vg-tooltip.css">

  <script>
  function addVlExample(path, id, options) {
    d3.json(path, function(error, vlSpec) {
      if (error) {
        return console.warn(error);
      }
      var stackedbarEmbed = {
        mode: "vega-lite",
        spec: vlSpec
      };
      vg.embed(id, stackedbarEmbed, function(error, result) {
        vlTooltip.linkToView(result.view, options, vlSpec);
      });
    });
  }

  function addVgExample(path, id, options) {
    d3.json(path, function(error, vgSpec) {
      if (error) {
        return console.warn(error);
      }
      vg.parse.spec(vgSpec, function(error, chart) {
        var view = chart({el:id}).update();
        vgTooltip.linkToView(view, options);
      });
    })
  }

  // Vega-Lite Example: Scatter Plot
  var scatterOpts = {
    showFields: [
      {
        field: "Name"
      },
      {
        field: "Horsepower",
        type: "number"
      },
      {
        field: "Miles_per_Gallon",
        fieldTitle: "Miles per Gallon",
        type: "number"
      }
    ],
    offset: {
      x: 1, // x and y axis in pixels
      y: 1
    }
  };
  addVlExample("examples/scatter.json", "#vis-scatter", scatterOpts);

  // Vega-Lite Example: Simple Bar Chart
  // We don't pass in opt because the data is very simple
  addVlExample("examples/bar.json", "#vis-bar");

  // Vega-Lite Example: Stacked Bar Chart
  var stackedbarOpts = {
    showFields: [
      {
        field: "month_date",
        fieldTitle: "Month",
        type: "date",
        format: "month" // can be either VL timeUnit or d3 time format string specifier
      },
      {
        field: "weather",
        fieldTitle: "Weather"
      },
      {
        field: "count",
        fieldTitle: "Count"
      }
    ]
  };
  addVlExample("examples/stacked_bar_weather.json", "#vis-stacked-bar", stackedbarOpts);

  // Vega-Lite Example: Line Chart
  var lineOpts = {}
  addVlExample("examples/line.json", "#vis-line");

  // Vega-Lite Example: Colored Line Chart
  var colorLineOpts = {}
  addVlExample("examples/line_color.json", "#vis-color-line");

  // Vega-Lite Example: Area Chart
  addVlExample("examples/area_vertical.json", "#vis-area-vertical");


  // Vega Example: Arc
  var arcOpts = {
    showFields: [
      {
        field: "data"
      }
    ]
  }
  addVgExample("examples/arc.json", "#vis-arc", arcOpts);

  // Vega Example: Choropleth
  var choroplethOpts = {
    showFields: [
      {
        field: "unemp.id",
        fieldTitle: "County ID"
      },
      {
        field: "unemp.rate",
        fieldTitle: "Unemployment Rate"
      }
    ]
  }
  addVgExample("examples/choropleth.json", "#vis-choropleth", choroplethOpts);

  // Vega Example: Force
  var forceOpts = {
    showFields: [
      {
        field: "name",
        fieldTitle: "Name",
        type: "string"
      }
    ]
  }
  addVgExample("examples/force.json", "#vis-force", forceOpts);

  // Vega Example: Heatmap
  var heatmapOpts = {
    showFields: [
      {
        field: "date",
        fieldTitle: "Date",
        type: "date",
        format: "yearmonthdate"
      },
      {
        field: "temp",
        fieldTitle: "Temperature(F)"
      },
      {
        field: "hour",
        fieldTitle: "Hour"
      }
    ],
    offset: {
      x: 10,
      y: 0
    }
  }
  addVgExample("examples/heatmap.json", "#vis-heatmap", heatmapOpts);

  </script>
</head>
<body>
  <h1>Vega-Lite Tooltip Examples</h1>

  <!-- Vega-Lite Example: Scatter Plot -->
  <div id="vis-scatter" class="tooltip-example"></div>

  <!-- Vega-Lite Example: Simple Bar Chart -->
  <div id="vis-bar" class="tooltip-example"></div>

  <!-- Vega-Lite Example: Stacked Bar Chart -->
  <div id="vis-stacked-bar" class="tooltip-example"></div>

  <!-- Vega-Lite Example: Line Chart -->
  <div id="vis-line" class="tooltip-example"></div>

  <!-- Vega-Lite Example: Color Line Chart -->
  <div id="vis-color-line" class="tooltip-example"></div>

  <!-- Vega-Lite Example: Area Chart -->
  <div id="vis-area-vertical" class="tooltip-example"></div>



  <h1>Vega Tooltip Examples</h1>
  <!-- Vega Example: Arc -->
  <div id="vis-arc" class="tooltip-example"></div>

  <!-- Vega Example: Choropleth -->
  <div id="vis-choropleth" class="tooltip-example"></div>

  <!-- Vega Example: Force -->
  <div id="vis-force" class="tooltip-example"></div>

  <!-- Vega Example: Heatmap -->
  <div id="vis-heatmap" class="tooltip-example"></div>

  <!-- Placeholder for Tooltip -->
  <table id="vis-tooltip" class="vg-tooltip"></table>

</body>
</html>
