<!DOCTYPE html>
<head>
  <title>Vega Lite Bar Chart</title>
  <meta charset="utf-8">

  <style media="screen">
    .vega-actions {
      display: none;
    }

    .tooltip-example {
      margin: 40px 0px;
    }
    .tooltip-example canvas {
      display: block;
      margin: auto;
    }
  </style>

  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="https://vega.github.io/vega/vega.min.js"></script>
  <script src="http://vega.github.io/vega-lite/vega-lite.js"></script>
  <script src="http://vega.github.io/vega-editor/vendor/vega-embed.js" charset="utf-8"></script>
  <script src="https://vega.github.io/vega-editor/vendor/d3.geo.projection.min.js"></script>
  <script src="https://vega.github.io/vega-editor/vendor/topojson.js"></script>
  <script src="http://vega.github.io/datalib/datalib.min.js"></script>
  <script src="src/vg-tooltip.js" charset="utf-8"></script>
  <link rel="stylesheet" type="text/css" href="src/vg-tooltip.css">

  <script>
  function addVlExample(path, id, options) {
    d3.json(path, function(error, vlSpec) {
      if (error) {
        return console.warn(error);
      }
      var stackedbarEmbed = {
        mode: "vega-lite",
        spec: vlSpec
      };
      vg.embed(id, stackedbarEmbed, function(error, result) {
        vlTooltip.linkToView(result.view, options, vlSpec);
      });
    });
  }

  function addVgExample(path, id, options) {
    d3.json(path, function(error, vgSpec) {
      if (error) {
        return console.warn(error);
      }
      vg.parse.spec(vgSpec, function(error, chart) {
        var view = chart({el:id}).update();
        vgTooltip.linkToView(view, options);
      });
    })
  }

  // Vega-Lite Example: Scatter Plot
  addVlExample("examples/scatter.json", "#vis-scatter", [
    {
      field: "Name"
    },
    {
      field: "Horsepower",
      type: "number"
    },
    {
      field: "Miles_per_Gallon",
      fieldTitle: "Miles per Gallon",
      type: "string"
    }
  ]);

  // Vega-Lite Example: Stacked Bar Chart
  addVlExample("examples/stacked_bar_weather.json", "#vis-stacked-bar", [
    {
      field: "month_date",
      fieldTitle: "Month",
      type: "date",
      format: "month" // same as "timeUnit in vlSpec"
    },
    {
      field: "weather",
      fieldTitle: "Weather"
    },
    {
      field: "count",
      fieldTitle: "Count"
    }
  ]);

  // Vega-Lite Example: Simple Bar Chart
  // We don't pass in opt because the data is very simple
  addVlExample("examples/bar.json", "#vis-bar");

  // Vega Example: Arc
  addVgExample("examples/arc.json", "#vis-arc", [
    {
      field: "data"
    }
  ]);

  // Vega Example: Choropleth
  addVgExample("examples/choropleth.json", "#vis-choropleth", [
    {
      field: "id"
    },
    {
      field: "properties"
    }
  ]);

  // Vega Example: Force
  addVgExample("examples/force.json", "#vis-force", [
    {
      field: "name"
    }
  ]);

  // Vega Example: Heatmap
  addVgExample("examples/heatmap.json", "#vis-heatmap", []);

  </script>
</head>
<body>
  <!-- Vega-Lite Example: Scatter Plot -->
  <div id="vis-scatter" class="tooltip-example"></div>

  <!-- Vega-Lite Example: Simple Bar Chart -->
  <div id="vis-bar" class="tooltip-example"></div>

  <!-- Vega-Lite Example: Stacked Bar Chart -->
  <div id="vis-stacked-bar" class="tooltip-example"></div>

  <!-- Vega Example: Arc -->
  <div id="vis-arc" class="tooltip-example"></div>

  <!-- Vega Example: Choropleth -->
  <div id="vis-choropleth" class="tooltip-example"></div>

  <!-- Vega Example: Force -->
  <div id="vis-force" class="tooltip-example"></div>

  <!-- Vega Example: Heatmap -->
  <div id="vis-heatmap" class="tooltip-example"></div>

  <!-- Placeholder for Tooltip -->
  <table id="vis-tooltip" class="vg-tooltip"></table>

</body>
</html>
